(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4160:function(e,t,l){Promise.resolve().then(l.bind(l,4428)),Promise.resolve().then(l.t.bind(l,6930,23)),Promise.resolve().then(l.t.bind(l,8877,23)),Promise.resolve().then(l.bind(l,7776))},4428:function(e,t,l){"use strict";l.d(t,{default:function(){return j}});var a=l(7437),s=l(7440),r=l(1005),o=l(4817),i=l(3397),d=l(6649),n=l(4258),c=l(7138),x=l(6463),h=l(2265),m=e=>{let{children:t}=e;return(0,a.jsx)("main",{className:"lg:pl-20 bg-[#0A0A0A] min-h-screen",children:(0,a.jsx)("div",{className:"max-w-screen-lg lg:mx-auto mx-4",children:t})})},p=l(9226),u=l(4649),v=l(4378),g=l(6706),f=l(2584),b=e=>{let{isOpen:t,setIsOpen:l}=e,[s,r]=(0,h.useState)(null),[o,i]=(0,h.useState)(null),[d,n]=(0,h.useState)(null),[c,x]=(0,h.useState)(null),[m,b]=(0,h.useState)(null),[j,y]=(0,h.useState)(""),[w,N]=(0,h.useState)(""),[C,M]=(0,h.useState)(!1),[P,A]=(0,h.useState)(!1);(0,h.useEffect)(()=>{t&&(async()=>{var e,t;M(!0);let l=await fetch("".concat("https://nexus-ai-search-api.vtempest.workers.dev/api","/config"),{headers:{"Content-Type":"application/json"}}),a=await l.json();r(a);let s=Object.keys(a.chatModelProviders||{}),o=Object.keys(a.embeddingModelProviders||{}),d=s.length>0?s[0]:"",c=o.length>0?o[0]:"",h=localStorage.getItem("chatModelProvider")||d||"",m=localStorage.getItem("chatModel")||a.chatModelProviders&&(null===(e=a.chatModelProviders[h])||void 0===e?void 0:e[0])||"",p=localStorage.getItem("embeddingModelProvider")||c||"",u=localStorage.getItem("embeddingModel")||a.embeddingModelProviders&&(null===(t=a.embeddingModelProviders[p])||void 0===t?void 0:t[0])||"";i(h),n(m),x(p),b(u),y(localStorage.getItem("openAIApiKey")||""),N(localStorage.getItem("openAIBaseURL")||""),M(!1)})()},[t]);let I=async()=>{A(!0);try{await fetch("".concat("https://nexus-ai-search-api.vtempest.workers.dev/api","/config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),localStorage.setItem("chatModelProvider",o),localStorage.setItem("chatModel",d),localStorage.setItem("embeddingModelProvider",c),localStorage.setItem("embeddingModel",m),localStorage.setItem("openAIApiKey",j),localStorage.setItem("openAIBaseURL",w)}catch(e){console.log(e)}finally{A(!1),l(!1),window.location.reload()}};return(0,a.jsx)(p.u,{appear:!0,show:t,as:h.Fragment,children:(0,a.jsxs)(u.V,{as:"div",className:"relative z-50",onClose:()=>l(!1),children:[(0,a.jsx)(p.u.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(p.u.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 scale-200",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(u.V.Panel,{className:"w-full max-w-md transform rounded-2xl bg-[#111111] border border-[#1c1c1c] p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsx)(u.V.Title,{className:"text-xl font-medium leading-6 text-white",children:"Settings"}),s&&!C&&(0,a.jsxs)("div",{className:"flex flex-col space-y-4 mt-6",children:[s.chatModelProviders&&(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Chat model Provider"}),(0,a.jsx)("select",{value:null!=o?o:void 0,onChange:e=>{i(e.target.value),n(s.chatModelProviders[e.target.value][0])},className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm",children:Object.keys(s.chatModelProviders).map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),o&&"custom_openai"!=o&&(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Chat Model"}),(0,a.jsx)("select",{value:null!=d?d:void 0,onChange:e=>n(e.target.value),className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm",children:s.chatModelProviders[o]?s.chatModelProviders[o].length>0?s.chatModelProviders[o].map(e=>(0,a.jsx)("option",{value:e,children:e},e)):(0,a.jsx)("option",{value:"",disabled:!0,children:"No models available"}):(0,a.jsx)("option",{value:"",disabled:!0,children:"Invalid provider, please check backend logs"})})]}),o&&"custom_openai"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Model name"}),(0,a.jsx)("input",{type:"text",placeholder:"Model name",defaultValue:d,onChange:e=>n(e.target.value),className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Custom OpenAI API Key"}),(0,a.jsx)("input",{type:"text",placeholder:"Custom OpenAI API Key",defaultValue:j,onChange:e=>y(e.target.value),className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Custom OpenAI Base URL"}),(0,a.jsx)("input",{type:"text",placeholder:"Custom OpenAI Base URL",defaultValue:w,onChange:e=>N(e.target.value),className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm"})]})]}),s.embeddingModelProviders&&(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Embedding model Provider"}),(0,a.jsx)("select",{value:null!=c?c:void 0,onChange:e=>{x(e.target.value),b(s.embeddingModelProviders[e.target.value][0])},className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm",children:Object.keys(s.embeddingModelProviders).map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),c&&(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Embedding Model"}),(0,a.jsx)("select",{value:null!=m?m:void 0,onChange:e=>b(e.target.value),className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm",children:s.embeddingModelProviders[c]?s.embeddingModelProviders[c].length>0?s.embeddingModelProviders[c].map(e=>(0,a.jsx)("option",{value:e,children:e},e)):(0,a.jsx)("option",{value:"",disabled:!0,selected:!0,children:"No embedding models available"}):(0,a.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Invalid provider, please check backend logs"})})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"OpenAI API Key"}),(0,a.jsx)("input",{type:"text",placeholder:"OpenAI API Key",defaultValue:s.openaiApiKey,onChange:e=>r({...s,openaiApiKey:e.target.value}),className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Ollama API URL"}),(0,a.jsx)("input",{type:"text",placeholder:"Ollama API URL",defaultValue:s.ollamaApiUrl,onChange:e=>r({...s,ollamaApiUrl:e.target.value}),className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"GROQ API Key"}),(0,a.jsx)("input",{type:"text",placeholder:"GROQ API Key",defaultValue:s.groqApiKey,onChange:e=>r({...s,groqApiKey:e.target.value}),className:"bg-[#111111] px-3 py-2 flex items-center overflow-hidden border border-[#1C1C1C] text-white rounded-lg text-sm"})]})]}),C&&(0,a.jsx)("div",{className:"w-full flex items-center justify-center mt-6 text-white/70 py-6",children:(0,a.jsx)(v.Z,{className:"animate-spin"})}),(0,a.jsxs)("div",{className:"w-full mt-6 space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-white/50",children:"We'll refresh the page after updating the settings."}),(0,a.jsx)("button",{onClick:I,className:"bg-[#24A0ED] flex flex-row items-center space-x-2 text-white disabled:text-white/50 hover:bg-opacity-85 transition duration-100 disabled:bg-[#ececec21] rounded-full px-4 py-2",disabled:C||P,children:P?(0,a.jsx)(g.Z,{size:20,className:"animate-spin"}):(0,a.jsx)(f.Z,{size:20})})]})]})})})})]})})},j=e=>{let{children:t}=e,l=(0,x.useSelectedLayoutSegments)(),[p,u]=(0,h.useState)(!1),v=[{icon:r.Z,href:"/",active:0===l.length,label:"Home"},{icon:o.Z,href:"/discover",active:l.includes("discover"),label:"Discover"},{icon:i.Z,href:"/library",active:l.includes("library"),label:"Library"}];return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-20 lg:flex-col",children:(0,a.jsxs)("div",{className:"flex grow flex-col items-center justify-between gap-y-5 overflow-y-auto bg-[#111111] px-2 py-8",children:[(0,a.jsx)("a",{href:"/",children:(0,a.jsx)(d.Z,{className:"text-white cursor-pointer"})}),(0,a.jsx)("div",{className:"flex flex-col items-center gap-y-3 w-full",children:v.map((e,t)=>(0,a.jsxs)(c.default,{href:e.href,className:(0,s.cn)("relative flex flex-row items-center justify-center cursor-pointer hover:bg-white/10 hover:text-white duration-150 transition w-full py-2 rounded-lg",e.active?"text-white":"text-white/70"),children:[(0,a.jsx)(e.icon,{}),e.active&&(0,a.jsx)("div",{className:"absolute right-0 -mr-2 h-full w-1 rounded-l-lg bg-white"})]},t))}),(0,a.jsx)(n.Z,{onClick:()=>u(!p),className:"text-white cursor-pointer"}),(0,a.jsx)(b,{isOpen:p,setIsOpen:u})]})}),(0,a.jsx)("div",{className:"fixed bottom-0 w-full z-50 flex flex-row items-center gap-x-6 bg-[#111111] px-4 py-4 shadow-sm lg:hidden",children:v.map((e,t)=>(0,a.jsxs)(c.default,{href:e.href,className:(0,s.cn)("relative flex flex-col items-center space-y-1 text-center w-full",e.active?"text-white":"text-white/70"),children:[e.active&&(0,a.jsx)("div",{className:"absolute top-0 -mt-4 h-1 w-full rounded-b-lg bg-white"}),(0,a.jsx)(e.icon,{}),(0,a.jsx)("p",{className:"text-xs",children:e.label})]},t))}),(0,a.jsx)(m,{children:t})]})}},7440:function(e,t,l){"use strict";l.d(t,{cn:function(){return r},t:function(){return o}});var a=l(4839),s=l(6164);let r=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,s.m6)((0,a.Z)(...t))},o=(e,t)=>{let l=Math.floor(Math.abs(t.getTime()-e.getTime())/1e3);return l<60?"".concat(l," second").concat(1!==l?"s":""):l<3600?"".concat(Math.floor(l/60)," minute").concat(1!==Math.floor(l/60)?"s":""):l<86400?"".concat(Math.floor(l/3600)," hour").concat(1!==Math.floor(l/3600)?"s":""):l<31536e3?"".concat(Math.floor(l/86400)," day").concat(1!==Math.floor(l/86400)?"s":""):"".concat(Math.floor(l/31536e3)," year").concat(1!==Math.floor(l/31536e3)?"s":"")}},8877:function(){}},function(e){e.O(0,[580,55,251,971,23,744],function(){return e(e.s=4160)}),_N_E=e.O()}]);